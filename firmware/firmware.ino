/// ********************************************************************************************************************
/// includes
/// ********************************************************************************************************************


#include <iostream>
#include <vector>
#include "ws2812b.h"
#include "image.h"
#include "hall.h"

/// ********************************************************************************************************************
/// using
/// ********************************************************************************************************************

using namespace std;

/// ********************************************************************************************************************
/// constants
/// ********************************************************************************************************************

const int PIN_NUMBER_OF_LED_STRIP_1 =           15;
const int NUMBER_OF_LEDS_IN_LED_STRIP_1 =       9;
const int PIN_NUMBER_OF_HALL_SENSOR =           4;

/// ********************************************************************************************************************
/// global objects
/// ********************************************************************************************************************

WS2812B led_strip_1(PIN_NUMBER_OF_LED_STRIP_1, NUMBER_OF_LEDS_IN_LED_STRIP_1);
Image current_image;
Hall hall_sensor(PIN_NUMBER_OF_HALL_SENSOR);

/// ********************************************************************************************************************
/// SETUP
/// ********************************************************************************************************************

void setup() {
	Serial.begin(115200);
  current_image.update_image_for_testing();
}

/// ********************************************************************************************************************
/// LOOP
/// ********************************************************************************************************************

void loop() {
  int theta = hall_sensor.get_angle();
  vector<vector<uint8_t>> v = current_image.get_led_strip_colors(theta, 9);
  led_strip_1.update_LED(v);
}
